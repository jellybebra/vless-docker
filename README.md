Я бы хотел поднимать всё это с помощью docker compose.

env параметры:
- Логин, пароль и webpath панели
- домен для self-sni

1. Установить x-ui на порту 8080 с http и создает инбаунд на 443 как это делает Vless wizard
2. Выключить inbound
3. Скачивает nginx
4. Настраивает nginx, чтобы слушал на порту 9000 указанный домен для self-sni
5. Генерирует сертификат для этого домена с помощью certbot
6. Скачивает какой-то поддельный сайт как в fakesite.sh
7. Следующим образом меняет inbound:
   1. Dest (Target): 127.0.0.1:9000
   2. sni: (домен указанный в env параметрах)
   3. Xver: 1
   4. жмет Get New Cert
   5. жмет Обновить
8. Включает обратно инбаунд

Также надо прокинуть папку, чтобы при перезапуске контейнера не слетели конфиги.

См. fakesite.sh

См. main.py